# Initialization macros:
AC_INIT(glom/main.cc)

AM_CONFIG_HEADER(config.h)

# Package name and version number:
AM_INIT_AUTOMAKE(glom, 0.8.2)

AM_MAINTAINER_MODE

# Checks for programs:
AC_PROG_CC
AC_PROG_CXX
AM_PROG_LIBTOOL
AM_SANITY_CHECK

#Internationalisation:
GETTEXT_PACKAGE=glom
AC_SUBST(GETTEXT_PACKAGE)
AC_DEFINE_UNQUOTED([GETTEXT_PACKAGE], ["$GETTEXT_PACKAGE"],
		   [The domain name to use with gettext.])
       
ALL_LINGUAS="en_CA cs de it nl pt_BR sv"

AM_GLIB_GNU_GETTEXT
AC_PROG_INTLTOOL

AC_CONFIG_AUX_DIR(macros)
AC_SUBST([ACLOCAL_AMFLAGS], ['-I macros ${ACLOCAL_FLAGS}'])

AC_LANG_CPLUSPLUS

# Checks for libraries:
PKG_CHECK_MODULES(GLOM, bakery-2.4 >= 2.3.5 libgdamm-2.0 >= 1.3.4 )
AC_SUBST(GLOM_CFLAGS)
AC_SUBST(GLOM_LIBS)


# Install path for DTD (e.g. /usr/local/share/glom):

#I would like to use this line, but it doesn't fully evaluate.
#It appears in config.h as "${prefix}/share/glom"
#So I hard-code "share" instead.
#GLOM_DTD_INSTALL_DIR="\"${datadir}/${PACKAGE}\""

GLOM_DTD_INSTALL_DIR="\"${prefix}/share/${PACKAGE}\""
AC_DEFINE_UNQUOTED(GLOM_DTD_INSTALL_DIR, $GLOM_DTD_INSTALL_DIR, "definition of GLOM_DTD_INSTALL_DIR")

# Evaluate the --enable-warnings=level option.
GLOM_ARG_ENABLE_WARNINGS()

# Generate Makefiles, configuration files and scripts:
AC_OUTPUT(Makefile \
  docs/Makefile \
  glom/Makefile \
    glom/data_structure/Makefile \
    glom/document/Makefile \
    glom/mode_data/Makefile \
    glom/mode_design/Makefile \
      glom/mode_design/fields/Makefile \
    glom/mode_find/Makefile \
    glom/navigation/Makefile \
    glom/utility_widgets/Makefile \
      glom/utility_widgets/adddel/Makefile \
        glom/utility_widgets/adddel/eggcolumnchooser/Makefile \
    po/Makefile.in
  macros/Makefile
)
