## Copyright (c) 2009  Openismus GmbH  <http://www.openismus.com/>
##
## This file is part of Glom.
##
## Glom is free software: you can redistribute it and/or modify it
## under the terms of the GNU General Public License as published
## by the Free Software Foundation, either version 2 of the License,
## or (at your option) any later version.
##
## Glom is distributed in the hope that it will be useful, but
## WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
## See the GNU General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with this program.  If not, see <http://www.gnu.org/licenses/>.

eggutildir = glom/utility_widgets/egg/util
eggmarshalers_list = $(top_srcdir)/$(eggutildir)/eggmarshalers.list

libegg_includes = -I$(top_builddir)/$(eggutildir) -I$(top_srcdir)/$(eggutildir)
libegg_cppflags = $(libegg_includes) $(EGG_CFLAGS) -DEGG_COMPILATION

glom_utility_widgets_egg_toolpalette_libeggtoolpalette_a_SOURCES =	\
	glom/utility_widgets/egg/toolpalette/eggenumaction.c		\
	glom/utility_widgets/egg/toolpalette/eggenumaction.h		\
	glom/utility_widgets/egg/toolpalette/eggtoolitemgroup.c		\
	glom/utility_widgets/egg/toolpalette/eggtoolitemgroup.h		\
	glom/utility_widgets/egg/toolpalette/eggtoolpalette.c		\
	glom/utility_widgets/egg/toolpalette/eggtoolpalette.h		\
	glom/utility_widgets/egg/toolpalette/eggtoolpaletteprivate.h

glom_utility_widgets_egg_toolpalette_libeggtoolpalette_a_CPPFLAGS = $(libegg_cppflags)

glom_utility_widgets_egg_util_libeggutil_a_SOURCES =	\
	glom/utility_widgets/egg/util/egg-marshal.c	\
	glom/utility_widgets/egg/util/eggintl.h		\
	glom/utility_widgets/egg/util/egg-macros.h

EXTRA_glom_utility_widgets_egg_util_libeggutil_a_SOURCES =	\
	glom/utility_widgets/egg/util/eggmarshalers.c		\
	glom/utility_widgets/egg/util/eggmarshalers.h

glom_utility_widgets_egg_util_libeggutil_a_CPPFLAGS = $(libegg_cppflags)

# Make all object files of libeggutil and libeggtoolpalette depend on
# eggmarshalers.[ch], in preference to resorting to BUILT_SOURCES.
$(glom_utility_widgets_egg_util_libeggutil_a_OBJECTS) \
$(glom_utility_widgets_egg_toolpalette_libeggtoolpalette_a_OBJECTS): \
	$(eggutildir)/eggmarshalers.c $(eggutildir)/eggmarshalers.h

$(eggutildir)/eggmarshalers.h: $(eggmarshalers_list)
	$(GLIB_GENMARSHAL) --prefix=_egg_marshal --header "$(eggmarshalers_list)" >'$@'

$(eggutildir)/eggmarshalers.c: $(eggmarshalers_list)
	$(GLIB_GENMARSHAL) --prefix=_egg_marshal --body "$(eggmarshalers_list)" >'$@'
